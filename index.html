<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MISS√ÉO: ANIVERS√ÅRIO 3.1 - FASE 2</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Special+Elite&family=Oswald:wght@700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Classified Dossier (Manila Beige, Typewriter Black, Stamp Red, Success Green) -->
    <!-- Application Structure Plan: A two-step, single-page application. Step 1 (Security Check): User must enter their name to "authenticate". JS validates the input. Step 2 (Mission Briefing): On success, Step 1 is hidden and Step 2 is shown. The mission details (riddle) are displayed, and the heading is dynamically personalized with the name entered in Step 1. The core interaction (riddle) remains, enhancing the personal feel. -->
    <!-- Visualization & Content Choices: Added an initial "authentication" form (HTML input + button). JS function `identifyAgent()` handles validation, personalization, and toggles visibility of the main content `div`. The `agent-name-display` span is the target for personalization. No charts needed. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Special Elite', monospace;
            background-color: #F3E9D2;
        }
        .stamp {
            font-family: 'Oswald', sans-serif;
            color: #b91c1c;
            border: 4px solid #b91c1c;
            padding: 2px 10px;
            transform: rotate(-5deg);
            letter-spacing: 2px;
            display: inline-block;
        }
        .dossier-container {
            background-color: #FAF6E9;
            border-left: 5px solid #c8a46e;
        }
        .btn-mission {
            transition: all 0.2s ease-in-out;
        }
        .btn-mission:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        /* O conte√∫do da miss√£o come√ßa oculto */
        #mission-content {
            display: none;
        }
    </style>
</head>
<body class="text-gray-800 p-4 sm:p-6 md:p-8">

    <!-- TELA 1: CHECAGEM DE IDENTIDADE (VIS√çVEL NO IN√çCIO) -->
    <div id="security-check" class="w-full max-w-2xl mx-auto dossier-container shadow-2xl p-6 sm:p-8">
        <header class="text-center mb-8">
            <h1 class="stamp text-3xl sm:text-4xl">FASE 2</h1>
        </header>
        <main>
            <h2 class="text-xl font-bold text-red-800 mb-4">SEGURAN√áA DO PONTO DE ENCONTRO</h2>
            <p class="mb-4">AGENTE, esta √© uma transmiss√£o segura para agentes confirmados.</p>
            <p class="mb-6">Por favor, insira seu nome (nome-c√≥digo) para acessar os detalhes da miss√£o.</p>
            
            <label for="agent-name-input" class="block font-bold mb-2">IDENTIFICA√á√ÉO DE AGENTE:</label>
            <input type="text" id="agent-name-input" class="w-full p-3 font-mono text-xl border-2 border-gray-400 bg-white" placeholder="Digite seu nome completo...">
            <p id="name-error" class="text-red-600 mt-2 font-bold" style="display: none;">Por favor, insira seu nome para se identificar.</p>
            
            <button onclick="identifyAgent()" class="btn-mission w-full mt-4 bg-green-700 hover:bg-green-800 text-white font-bold py-3 px-6 rounded-lg shadow-lg">
                ACESSAR DOSSI√ä
            </button>
        </main>
        <footer class="mt-8 pt-4 border-t border-gray-300 text-center text-sm text-gray-500">
            <p>*Aguardando identifica√ß√£o...*</p>
        </footer>
    </div>

    <!-- TELA 2: CONTE√öDO DA MISS√ÉO (COME√áA OCULTA) -->
    <div id="mission-content" class="w-full max-w-2xl mx-auto dossier-container shadow-2xl p-6 sm:p-8">
        
        <header class="text-center mb-8">
            <h1 class="stamp text-3xl sm:text-4xl">FASE 2</h1>
        </header>

        <main>
            <section id="mission-update" class="border-b-2 border-dashed border-gray-400 pb-6">
                <!-- NOME INJETADO AQUI -->
                <h2 class="text-xl font-bold mb-2">PARA: AGENTE <span id="agent-name-display" class="text-blue-700"></span></h2> 
                
                <p class="text-lg">Assunto: In√≠cio da "Opera√ß√£o Alta Amizade_C√≥digo B-DAY 3.1"</p>
                <p class="mt-4">Sua confirma√ß√£o foi recebida. Bem-vindo √† equipe. A Fase 1 (Recrutamento) est√° conclu√≠da. A Fase 2 (Localiza√ß√£o) est√° agora ativa.</p>
                
                <div class="mt-6 p-4 bg-yellow-100 border border-yellow-300">
                    <p class="font-bold text-lg">DADOS DE INTELIG√äNCIA (PARCIAL):</p>
                    <p class="mt-2">Nossos analistas confirmaram parte das coordenadas da "Base de Opera√ß√µes" (Sal√£o de Festas).</p>
                    <p class="text-2xl font-bold text-center my-2">Rua Lamenha Lins</p>
                </div>
            </section>

            <section id="decryption-challenge" class="mt-6">
                 <h2 class="text-xl font-bold text-red-800 mb-4">DESAFIO DE DECODIFICA√á√ÉO (URGENTE)</h2>
                 <p class="mb-4">O n√∫mero exato da base est√° protegido por uma cifra de seguran√ßa. Use sua capacidade de dedu√ß√£o para quebrar o c√≥digo.</p>

                 <div class="bg-gray-200 p-4 my-4 border border-gray-400">
                    <p class="font-bold text-lg text-center">ENIGMA DA CIFRA:</p>
                    <p class="text-center text-lg mt-2">"Eu sou o n√∫mero de ladr√µes que seguiram Ali Bab√°... <strong>mais um</strong>."</p>
                 </div>

                 <div class="mt-6">
                    <label for="answer-input" class="block font-bold mb-2">INSIRA A CHAVE NUM√âRICA (O N√öMERO):</label>
                    <input type="text" id="answer-input" class="w-full p-3 font-mono text-xl border-2 border-gray-400 bg-white" placeholder="Digite sua resposta...">
                    <button onclick="checkAnswer()" class="btn-mission w-full mt-4 bg-blue-700 hover:bg-blue-800 text-white font-bold py-3 px-6 rounded-lg shadow-lg">
                        DECIFRAR COORDENADAS
                    </button>
                 </div>
            </section>
            
            <section id="reveal-zone" class="mt-6 border-t-2 border-dashed border-gray-400 pt-6" style="display: none;">
                <!-- O conte√∫do aqui ser√° preenchido pelo JavaScript -->
            </section>

        </main>
        
        <footer class="mt-8 pt-4 border-t border-gray-300 text-center text-sm text-gray-500">
            <p id="mission-footer-status">*Aguardando decodifica√ß√£o. O sucesso da miss√£o depende de voc√™.*</p>
        </footer>

    </div>

    <script>
        function identifyAgent() {
            const agentNameInput = document.getElementById('agent-name-input');
            const agentName = agentNameInput.value.trim();
            const errorMsg = document.getElementById('name-error');

            if (agentName === "") {
                errorMsg.style.display = 'block'; // Mostra o erro
                agentNameInput.classList.add('border-red-500'); // Destaca o input
                agentNameInput.focus();
                return; // Para a execu√ß√£o
            }

            // Se chegou aqui, o nome √© v√°lido
            errorMsg.style.display = 'none'; // Esconde o erro
            agentNameInput.classList.remove('border-red-500'); // Remove o destaque

            // Preenche o nome na Tela 2
            document.getElementById('agent-name-display').textContent = agentName;

            // Esconde a Tela 1 e Mostra a Tela 2
            document.getElementById('security-check').style.display = 'none';
            document.getElementById('mission-content').style.display = 'block';
        }

        function checkAnswer() {
            const answer = document.getElementById('answer-input').value.trim();
            const revealZone = document.getElementById('reveal-zone');
            const footerStatus = document.getElementById('mission-footer-status'); // Pega o elemento do rodap√© da TELA 2
            let resultMessage = '';

            if (answer === '41') {
                resultMessage = `
                    <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4" role="alert">
                        <p class="font-bold text-xl">ACESSO AUTORIZADO!</p>
                        <p class="font-bold text-lg mt-2">SINAL ESTABELECIDO. COORDENADAS COMPLETAS:</p>
                    </div>

                    <div class="mt-4 p-4 bg-gray-100 border border-gray-300">
                        <p class="font-bold text-lg">üìç LOCAL SEGURO:</p>
                        <p class="text-xl"><strong>Rua Lamenha Lins, 41</strong></p>
                        <p class="text-lg">(Sal√£o de Festas)</p>
                        
                        <p class="font-bold text-lg mt-4">üõÇ PROTOCOLO DE ENTRADA:</p>
                        <p class="text-lg">Seu nome est√° no <span class="font-bold">Manifesto de Agentes Aprovados</span>. Ao chegar ao *Checkpoint* (portaria), apenas se identifique para ter o acesso liberado.</p>
                    </div>

                    <div class="mt-6 text-center">
                        <p class="text-lg font-bold">Contamos com voc√™, Agente.</p>
                        <p class="text-lg font-bold">DIA 15/11, √ÄS 16H.</p>
                    </div>
                `;
                footerStatus.textContent = '*Status da Miss√£o: Coordenadas Decifradas. Agente mobilizado.*'; // MENSAGEM DE SUCESSO
                footerStatus.classList.add('text-green-700', 'font-bold'); // Estiliza sucesso
                footerStatus.classList.remove('text-red-700');
            } else {
                resultMessage = `
                    <div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4" role="alert">
                        <p class="font-bold text-xl">ACESSO NEGADO!</p>
                        <p class="mt-2">A cifra <strong class="mx-1">"${answer}"</strong> est√° incorreta. A intelig√™ncia inimiga pode ter corrompido sua linha.</p>
                        <p class="font-bold mt-2">Tente novamente, Agente.</p>
                    </div>
                `;
                footerStatus.textContent = '*Status da Miss√£o: Falha na decodifica√ß√£o. Tente novamente.*'; // MENSAGEM DE FALHA
                footerStatus.classList.add('text-red-700', 'font-bold'); // Estiliza falha
                footerStatus.classList.remove('text-green-700');
            }

            revealZone.innerHTML = resultMessage;
            revealZone.style.display = 'block'; // Torna a se√ß√£o vis√≠vel
        }
    </SCRIPT>

</body>
</html>

